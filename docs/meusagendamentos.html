<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Meus Agendamentos - LabAgenda</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <!-- Menu lateral -->
  <button class="menu-toggle" onclick="toggleMenu()">☰</button>

  <div class="sidebar" id="sidebar">
    <h3>Menu</h3>
    <a href="telaagendamento.html">📅 Reservar Sala</a>
    <a href="telabusca.html">🔍 Buscar Salas</a>
    <a href="telaperfil.html">👤 Perfil</a>
    <a href="telasuporte.html">💬 Suporte</a>
  </div>

  <!-- Conteúdo da página -->
  <div class="container">
    <h2><span>Meus Agendamentos</span></h2>

    <div id="listaAgendamentos">
      <div class="agendamento-item">
        <div class="agendamento-header">
          <h3>Lab 1 - Informática</h3>
          <span class="status">✅ Confirmado</span>
        </div>
        <div class="agendamento-info">
          <span>📅 10/06/2024</span>
          <span>⏰ 08:00 - 10:00</span>
          <span>👥 30 pessoas</span>
        </div>
        <div class="agendamento-acoes">
          <button class="btn btn-detalhes" onclick="verDetalhes('Lab1')">Ver Detalhes</button>
          <button class="btn btn-cancelar" onclick="cancelarAgendamento('Lab1')">Cancelar</button>
        </div>
      </div>

      <div class="agendamento-item">
        <div class="agendamento-header">
          <h3>Sala 101 - Teoria</h3>
          <span class="status">✅ Confirmado</span>
        </div>
        <div class="agendamento-info">
          <span>📅 12/06/2024</span>
          <span>⏰ 14:00 - 16:00</span>
          <span>👥 20 pessoas</span>
        </div>
        <div class="agendamento-acoes">
          <button class="btn btn-detalhes" onclick="verDetalhes('Sala101')">Ver Detalhes</button>
          <button class="btn btn-cancelar" onclick="cancelarAgendamento('Sala101')">Cancelar</button>
        </div>
      </div>

      <div class="agendamento-item">
        <div class="agendamento-header">
          <h3>Lab 3 - Programação</h3>
          <span class="status">✅ Realizado</span>
        </div>
        <div class="agendamento-info">
          <span>📅 05/06/2024</span>
          <span>⏰ 10:00 - 12:00</span>
          <span>👥 15 pessoas</span>
        </div>
        <div class="agendamento-acoes">
          <button class="btn btn-detalhes" onclick="verDetalhes('Lab3')">Ver Detalhes</button>
        </div>
      </div>
    </div>

    <div id="semAgendamentos" class="sem-agendamentos" style="display: none;">
      Você ainda não tem agendamentos.
    </div>
  </div>

  <script>
    // Função do menu
    function toggleMenu() {
      const sidebar = document.getElementById('sidebar');
      const menuToggle = document.querySelector('.menu-toggle');
      
      sidebar.classList.toggle('active');
      menuToggle.classList.toggle('active');
    }

    // Função pra ver detalhes
    function verDetalhes(sala) {
      window.location.href = `teladetalhesdasala.html?sala=${encodeURIComponent(sala)}`;
    }

    // Função pra cancelar agendamento
    function cancelarAgendamento(sala) {
      if (confirm('Tem certeza que quer cancelar este agendamento?')) {
        // Remove o agendamento da lista
        const agendamento = event.target.closest('.agendamento-item');
        agendamento.remove();
        
        // Verifica se ainda tem agendamentos
        verificarAgendamentos();
      }
    }

    // Função pra verificar se tem agendamentos
    function verificarAgendamentos() {
      const lista = document.getElementById('listaAgendamentos');
      const semAgendamentos = document.getElementById('semAgendamentos');
      
      // Se não tem mais agendamentos, mostra a mensagem
      if (lista.children.length === 0) {
        lista.style.display = 'none';
        semAgendamentos.style.display = 'block';
      }
    }

    // Verifica ao carregar a página
    window.onload = verificarAgendamentos;

  </script>
</body>
</html>
